# HomeFinder — Разбор требований (RU)

## Functional Requirements — Функциональные требования

### Core Platform Features — Базовые функции платформы
- Property Search — расширенный поиск:
  - Фильтры по цене, локации, типу объекта, удобствам, школам; поддержка геофильтров (bbox, радиус, полигоны районов).
  - Быстрый отклик: индексация (текст + гео), фасетные агрегаты, предкеш популярных запросов.
  - Подсказки и сортировка по релевантности (текст, расстояние, свежесть, рыночные сигналы).
- Property Details — карточка объекта:
  - Медиа: фото в высоком разрешении, 3D/виртуальные туры, планы этажей; CDN, трансформации изображений.
  - Данные района: школы, безопасность, инфраструктура; аналитика рынка и сравнительный анализ.
  - Производительность: инкрементальная подгрузка, оптимизация изображений (WebP/AVIF), кеширование.
- Valuation Engine — автоматическая оценка (AVM):
  - Модели оценки стоимости с доверительными интервалами; объяснимость факторов.
  - Пакетные пересчеты по расписанию + онлайн-оценка; защита от дрейфа данных.
  - Юридические дисклеймеры; ответственное использование (fairness, отсутствие дискриминации).
- Agent Marketplace — маркетплейс агентов:
  - Подбор и контакт с агентами, отзывы, верифицированная история сделок; анти-фрод и модерация.
  - Маршрутизация лидов, SLA по отклику; прозрачность метрик качества.
  - Разграничение интересов брокера/франшизы; соответствие договорным отношениям.
- Mortgage Integration — ипотечная интеграция:
  - Предодобрение, сравнение ставок, онбординг заявки; интеграции с кредиторами.
  - Обработка чувствительных данных (PII/финансы): согласие, шифрование, сегрегация сред.
  - Отслеживание статусов, уведомления; соответствие TILA-RESPA.

### Data Integration Requirements — Интеграции данных
- MLS Integration — 800+ MLS в реалтайме:
  - Разные форматы/частоты: RESO Web API/RETS/фиды; коннекторы, планировщики, ретраи.
  - Нормализация к канонической схеме (RESO DD), дедуп между MLS, разрешение конфликтов.
  - Обеспечение свежести (SLA), метрики качества и наблюдаемость конвейера.
- Public Records — публичные реестры:
  - История объектов, налоги, сделки, разрешения; разнородные источники графств/штатов.
  - Геокодинг/нормализация адресов (USPS/CASS), линковка к MLS.
  - Разрешения на использование, частота обновлений, соответствие законам штата.
- Financial Services — кредиторы, бюро, титульные:
  - Интеграции для скоринга/кредитных отчетов/титульных проверок; аудит и трассировка.
  - Жесткая безопасность: сети, ключи, токены, шифрование в покое/транзите.
  - Контролируемые потоки данных, минимизация доступа, принцип наименьших привилегий.
- Third-Party Data — внешние данные:
  - Рейтинги школ, преступность, walkability, демография; лицензии/EULA и атрибуция.
  - Согласование по географии (координаты/границы), разные SLA, неоднородное качество.
  - Обновление по расписанию, мониторинг дрейфа и регрессий качества.

### Advanced Features — Продвинутые функции
- Price Prediction — прогноз цен и трендов:
  - ML-модели: исторические сделки, метрики спроса/предложения, сезонность, макрофакторы.
  - Валидация, A/B, мониторинг дрейфа, пересчет по регионам/сегментам.
  - Коммуникация уверенности модели (интервалы) и ограничения применения.
- Saved Searches & Alerts — сохраненные поиски и алерты:
  - Сопоставление новых/обновленных листингов; анти-спам и дедуп уведомлений.
  - Каналы: push/email/SMS; окна тишины, частотные лимиты, предпочтения пользователя.
  - Событийная архитектура для near-real-time доставки.
- Virtual Tours — 3D/AR/дроны:
  - Большие медиа: адаптивный стриминг, сжатие, CDN, совместимость устройств.
  - Интеграция с провайдерами, права/владение контентом, модерация.
  - Фоллбэки при низкой сети; lazy load.
- Market Analytics — аналитика рынка:
  - Показатели района: тренды цен, инвентарь, DOM; материализованные представления.
  - Разрезы по географии/типам/диапазонам; тайловые агрегации для карт.
  - Планы обновления, контроль консистентности и версионности.

## Non-Functional Requirements — Нефункциональные требования

### Scale — Масштаб
- Users — 100M MAU:
  - Пиковая одновременность, многорегиональная подача, лимитирование/квотирование.
  - Управление сессиями и кэшами; защита от абьюза и бот-трафика.
- Properties — 200M записей:
  - Активные и off-market; SCD (история изменений), вторичные индексы.
  - План хранения (hot/warm/cold), стоимость и стратегии архивации.
- Agents — 2M профилей:
  - Верификация, история транзакций, отзывы/модерация, страницы профилей под нагрузкой.
- Data Updates — 1M обновлений/день:
  - Пропускная способность ingest, бэкпрешсур, идемпотентность, упорядочивание событий.

### Performance — Производительность
- Search Response <200мс p95:
  - Гео+текст индекс, фасеты, план запросов; кеш результатов и популярные запросы.
  - Борьба с хвостовой латентностью: таймауты, деградация, реплики чтения.
- Map Rendering <300мс (1000+ пинов):
  - Тайловая кластеризация/бакетирование, серверные тайлы, CDN, инкрементальная загрузка.
- Image Loading <1с:
  - Форматы AVIF/WebP, resize/quality на edge, lazy/priority loading, HTTP/2/3.
- Valuation <5с:
  - Асинхронный расчет с прогрессом/кешем; предрасчет «теплых» регионов; фоллбэки.

### Reliability & Compliance — Надежность и соответствие
- Availability 99.95%:
  - Мульти-регион, автоматический фейловер, катастрофоустойчивость, бесперебойные обновления.
- Data Accuracy 99.9%:
  - Валидации/правила качества, мониторинг свежести/полноты, обратная связь от пользователей.
- Privacy (CCPA и законы штатов):
  - Согласие, DSAR (доступ/удаление), минимизация, аудит доступа, управление сроками хранения.
- Financial Compliance (TILA-RESPA, fair lending):
  - Аудит-трейлы, сегрегация PII, независимые контуры; недискриминационные практики.

## Technical Constraints — Технические ограничения

### Data Complexity — Сложность данных
- MLS Variations — разнообразие схем/частот:
  - 800+ систем, разные протоколы и поля; эволюция схем, обратная совместимость.
  - Тест-контуры на коннекторы, контрактные тесты, каталог схем.
- Data Quality — качество данных:
  - Неполные/шумные описания, дубликаты; дедуп по адресу/гео/изображениям/идентификаторам.
  - Каноникализация, нормализация адресов (CASS), правила обязательности полей.
- Historical Data — исторические данные (30+ лет):
  - SCD Type 2, журнал событий/версии; компрессия, холодное хранилище, индексы по времени.
  - Ускорители запросов (materialized views), выборочные сканы.
- Geographic Coverage — геопокрытие:
  - Неоднородность данных по регионам; fallback/заглушки, региональная локализация.
  - Геоиндексация, часовые пояса, сезонность, границы районов.

### Real Estate Industry Challenges — Отраслевые вызовы
- Agent Relationships — отношения с брокерами/франшизами:
  - Правила роутинга лидов, доли выручки, брендовые требования.
  - Прозрачность, отчетность, согласование интересов.
- Legal Requirements — законы штатов/раскрытия:
  - Штатные обязательные поля и дисклеймеры; соблюдение Fair Housing.
  - Версионирование требований и фич-флаги по юрисдикциям.
- Market Sensitivity — чувствительность рынка:
  - Быстрые колебания цен; аккуратная подача прогнозов; защита от неправильной интерпретации.
  - Частые обновления агрегатов, анти-регрессии.
- Seasonal Patterns — сезонность:
  - Всплески весной/летом: подготовленные кеши, прогрев, бюджет автоскейлинга.

## Key Design Challenges — Ключевые инженерные вызовы
- Build vs Buy — где покупать managed-сервисы, а где строить своё:
  - Фокус на дифференциаторах (качество MLS данных, поиск/ранжирование, уведомления).
  - Покупка там, где рыночные сервисы зрелые (поиск, стриминг, CDN, тайлы, хранилища).
- Data Architecture — архитектура данных:
  - Каноническая модель, качество/линейдж, SCD/история, многослойная подача (serve/search/analytics).
  - Стратегии дедупа и консистентности между источниками.
- Event-Driven Architecture — событийность:
  - Near-real-time обновления индекса, алерты сохраненных поисков, реакция на MLS изменения.
  - Масштабирование воркеров, DLQ, повторная обработка, идемпотентность.

Комментарий: это именно темы, на которых имеет смысл делать акцент. В презентации требуется выбрать по одному варианту для High-Level Architecture, Deep Dive и Scaling & Performance; при этом эти вызовы логично «прострелить» сквозь всё повествование (обоснование решений и trade-offs).

## Evaluation Criteria — Критерии оценки
- Technical Design — технический дизайн:
  - Четкая архитектура, разумные trade-offs, соответствие требованиям и ограничениям.
- System Thinking — системное мышление:
  - Видение сквозных потоков данных/событий, влияние решений на соседние компоненты.
- Communication — коммуникация:
  - Ясные объяснения, структура слайдов, прозрачные допущения, приоритизация фокусов.
- Innovation — инновации:
  - Не заигрывая с риском: практичные улучшения (ML, кеши, геоиндексы, data governance).

Комментарий: критерии — это не темы, а «линзы оценки». Фокус должен показывать зрелые решения по выбранным разделам, при этом форма подачи и аргументация напрямую влияют на оценку по этим критериям.
